"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e=function(){function i(e){var c=this,t=e.id,n=e.data,o=e.itemKey,a=e.isExpand,s=e.isAsync,d=e.loadNode,u=e.htmlFormatter;_classCallCheck(this,i),this.contain=document.querySelector(t),this.bindSubNode=function(e,t){e.addEventListener("click",function(e){c.subNode.prototype=t,c.subNode(e)})},this.subNode=function(e){var t=e.target.parentNode,n=c.subNode.prototype.children,a=null;if(n&&0<n.length)if("true"==t.dataset.expand){for(var r=[].filter.call(t.children,function(e){return"UL"==e.tagName}),d=r.length-1;0<=d;d--)t.removeChild(r[d]);t.dataset.expand="false"}else a=c.createunExpandListEls(n),t.appendChild(a),t.dataset.expand="true";else t.dataset.loading=t.dataset.loading?"fasle":"true",(t.dataset.expand="true")==t.dataset.loading&&c.loadNode(n,t)},this.loadNode=function(n,a){if(d&&n.length<=0){a.dataset.loading="false";var r={label:a.querySelector("span").innerHTML,id:a.dataset.itemId,children:n};new Promise(function(e,t){d(r,e,t)}).then(function(e){delete a.dataset.loading,n.push.apply(n,_toConsumableArray(e));var t=c.createunExpandListEls(e);a.appendChild(t)}).catch(function(e){throw delete a.dataset.loading,new Error(e)})}},this.createunExpandListEls=function(e){if(e&&0<e.length){var d=document.createElement("ul");return e.forEach(function(e){var t=document.createElement("li");t.dataset.itemId=e[o.id];var n=document.createElement("span");n.innerHTML=u(e),t.appendChild(n);var a=document.createElement("span");if(a.innerHTML=e[o.label],s?e[o.children]:e[o.children]&&0<e[o.children].length){t.dataset.expand=!1;var r=document.createElement("a");c.bindSubNode(r,e),t.appendChild(r)}t.appendChild(a),d.appendChild(t)}),d}},this.createExpandedListEls=function(e){var t=c.getType(e);if("Array"==t){for(var n=document.createElement("ul"),a=0;a<e.length;a++)n.appendChild(c.createExpandedListEls(e[a]));return n}if("Object"==t){var r=document.createElement("li"),d=document.createElement("span");d.innerHTML=e[o.label],r.dataset.itemId=e[o.id];var i=document.createElement("span");if(i.innerHTML=u(e),r.appendChild(i),r.appendChild(d),s?e[o.children]:e[o.children]&&0<e[o.children].length){r.dataset.expand=0<e[o.children].length;var l=document.createElement("a");c.bindSubNode(l,e),r.appendChild(l),r.appendChild(c.createExpandedListEls(e[o.children]))}return r}};var r=null;r=a?this.createExpandedListEls(n):this.createunExpandListEls(n),this.contain.appendChild(r)}return _createClass(i,[{key:"getType",value:function(e){var t=Object.prototype.toString.call(e);return"[object Array]"==t?"Array":"[object Object]"==t?"Object":"param"}}]),i}();window.AjaxTree=e}(window);